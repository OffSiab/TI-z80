Var MACRO first, second
 segment MemVars
&first:
       ds     second
 segment Main
 ENDMAC

tempSectorBuffer                   equ    appBackUpScreen
sectorBuffer                       equ    9000h ;now placed on extra RAM pages because it can potentially be up to 4KB/8KB depending on host driver

rootDirectoryLBA                   equ    0021h ;003Fh ;low word only
RAMStartLBA                        equ    0041h ;0040h ;low word only
FlashStartLBA                      equ    0042h ;0041h ;low word only
dataStartLBA                       equ    0082h ;this is the start of real file/variable data

USBflag                     equ    0FFFFh
msdActive                   equ    0
kbdActive                   equ    1
setAddress			equ	2
debugOn                     equ    3
driverConfigured            equ    4
calcActive                  equ    5
mouseActive                 equ    6
gamepadActive               equ    7

deviceDescAddress           equ    9C16h
configDescAddress           equ    9C18h
bytesRemaining              equ    9C27h
outputBuffer                equ    9C29h
inputBuffer                 equ    9C31h
USBaddress                  equ    9C71h
numOutBytes                 equ    9C78h

periph8xFlags			equ	asm_Flag1
receivingOS                 equ    0
deviceDesc			equ	2
readSectorCmdReceived       equ    3
notDoneSending              equ    5
useExtraRAMPages            equ    6
getOutNow                   equ    7

LOG MACRO first, second
 IF LOGGING_ENABLED = 1
 IFNDEF DoLog
  EXTERN DoLog
 ENDIF
       push   bc
       ifneq "_&second", "_"
              ld     c,second
       else
              ld     c,0
       endif
       ld     b,log&first
       call   DoLog
       pop    bc
 ENDIF
 ENDMAC

logGetMaxPacketSize EQU 1
logData EQU 2
logGetClass EQU 3
logGetIDs EQU 4
logReadDescriptor EQU 5
logQuit EQU 6
logSendData EQU 7
logSendControlData EQU 8
logAutoSetup EQU 9
logDataEnd EQU 10
logInA0Start EQU 11
logOutA0Start EQU 12
logHostInit EQU 13
logKillDevice EQU 14
logKillDriver EQU 15
logSetupLog EQU 16
logInData EQU 17
logCallBack EQU 18
logError EQU 19
logSetPortFeature EQU 20
logClearPortFeature EQU 21
logGetDeviceStatus EQU 22
logSetHubFeature EQU 23
logClearHubFeature EQU 24
logGetHubStatus EQU 25
logGetHubPortStatus EQU 26
logSetAddress EQU 27
logLogDone EQU 28
logDataStart EQU 29
logCustom EQU 30
logInterrupt EQU 31
logKBDInit EQU 32
logKBDGetKey EQU 33
logMSDInit EQU 34
logUFIInit EQU 35
logFATInit EQU 36
logPadInit EQU 37
logPadStart EQU 38
logPadSetup EQU 39
logPadCallBack EQU 40
logPumpOn EQU 41
logPumpOff EQU 42
logPump EQU 43
logCache EQU 44
logIntPort82 EQU 45
logIntPort84 EQU 46
logIntPort8F EQU 47
logIStallPipe EQU 48
logSetConfig EQU 49
logPeriphInit EQU 50
logIntPort86 EQU 51
logControlData EQU 52
logEnableOut EQU 53
logIntData EQU 54
logBulkData EQU 55
logMSDCmd EQU 56
logGotSetAddr EQU 57
logSectorRead EQU 58
logWriteError EQU 59
logSectorWrite EQU 60
logInvalidMSDCmd EQU 61
logInvalidDesc EQU 62
logStringDesc EQU 63
logCalcCmd    EQU 64
logCalcUSBErr EQU 65
logBit0Port56 EQU 66

logCacheOn           EQU 0
logCacheOff          EQU 1
logCacheIsInCache    EQU 2
logCacheReadFromCache EQU 3
logCacheResetLRU     EQU 4
logCacheSaveToCache  EQU 5

errEPIndex           EQU 1

