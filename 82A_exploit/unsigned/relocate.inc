#macro relocate(new_location)
 #ifdef old_location
   .echo "Zelda: ",__file,":",__line,": error: You cannot nest relocate blocks."
 #else
   #define old_location eval($)
   .org new_location
   #define g_location eval(new_location)
 #endif
#endmacro

#macro endrelocate()
 #ifdef g_location
   .org $-g_location + old_location
   #undefine g_location
   #undefine old_location
 #else
   .echo "Error line ",__line,": No relocate statements corresponds to this endrelocate."
 #endif
#endmacro

#macro relocate2(new_location2)
 #ifdef old_location2
   .echo "Zelda: ",__file,":",__line,": error: You cannot nest relocate2 blocks."
 #else
   #define old_location2 eval($)
   .org new_location2
   #define g_location2 eval(new_location2)
 #endif
#endmacro

#macro endrelocate2()
 #ifdef g_location2
   .org $-g_location2 + old_location2
   #undefine g_location2
   #undefine old_location2
 #else
   .echo "Error line ",__line,": No relocate statements corresponds to this endrelocate2."
 #endif
#endmacro